{
  "version": "2.3",
  "date": "2026-01-27",
  "downloadUrl": "https://drive.google.com/uc?export=download&id=1nxsXmvEhv1_nyp8HrLvVvEZhxJdQfkEY",
  "downloadFileName": "FlowForge_2501.zip",
  "tags": ["bugfix", "critical", "improvement"],
  "title": {
    "vi": "S·ª≠a l·ªói Tab ·∫¢nh & L·ªói Tr√πng L·∫∑p Script",
    "en": "Fix Image Tab & Duplicate Injection Error"
  },
  "summary": {
    "vi": "B·∫£n c·∫≠p nh·∫≠t quan tr·ªçng s·ª≠a c√°c l·ªói nghi√™m tr·ªçng t·∫°i Tab ·∫¢nh v√† l·ªói l·∫∑p l·∫°i vi·ªác nh√∫ng script g√¢y s·∫≠p ti·ªán √≠ch.",
    "en": "Critical update fixing serious bugs in Image Tab and duplicate script injection that caused extension crash."
  },
  "sections": [
    {
      "type": "bugfix",
      "emoji": "üêõ",
      "title": { "vi": "S·ª≠a L·ªói", "en": "Bug Fixes" },
      "items": [
        {
          "class": "fix",
          "vi": "<strong>S·ª≠a ch·∫ø ƒë·ªô \"Ch·ªâ T·∫°o\" (Tab ·∫¢nh):</strong> Kh·∫Øc ph·ª•c l·ªói ch·∫ø ƒë·ªô Ch·ªâ T·∫°o kh√¥ng ho·∫°t ƒë·ªông do th√¥ng ƒëi·ªáp <code>IMG_START_BATCH_CREATE_ONLY</code> ch∆∞a ƒë∆∞·ª£c x·ª≠ l√Ω ƒë√∫ng.",
          "en": "<strong>Fix \"Create Only\" Mode (Image Tab):</strong> Fixed Create Only mode not working. Root cause was message <code>IMG_START_BATCH_CREATE_ONLY</code> not being handled correctly in content script."
        },
        {
          "class": "fix",
          "vi": "<strong>S·ª≠a l·ªói Tr√πng L·∫∑p Script:</strong> Kh·∫Øc ph·ª•c l·ªói <code>ImageBatchManager has already been declared</code> khi Sidepanel nh√∫ng script nhi·ªÅu l·∫ßn. Th√™m c∆° ch·∫ø ki·ªÉm tra marker ƒë·ªÉ tr√°nh tr√πng l·∫∑p.",
          "en": "<strong>Fix Duplicate Injection Error:</strong> Fixed <code>ImageBatchManager has already been declared</code> error when sidepanel injects scripts twice. Added marker check to prevent duplicate."
        },
        {
          "class": "fix",
          "vi": "<strong>S·ª≠a n√∫t S·ª≠ d·ª•ng l·∫°i (Ch·∫ø ƒë·ªô Tƒ©nh):</strong> Kh·∫Øc ph·ª•c l·ªói nh·∫•n nh·∫ßm v√†o ·∫£nh thay v√¨ n√∫t \"S·ª≠ d·ª•ng l·∫°i c√¢u l·ªánh\". T·ªëi ∆∞u l·∫°i logic t√¨m n√∫t b·∫±ng XPath v√† ƒë·ªëi kh·ªõp vƒÉn b·∫£n.",
          "en": "<strong>Fix Static Mode Reuse Button:</strong> Fixed Static mode (Image Tab) clicking wrong element (thumbnail instead of \"Reuse prompt\" button). Rewrote button detection using XPath and text matching."
        },
        {
          "class": "fix",
          "vi": "<strong>S·ª≠a PING Handler:</strong> Th√™m <code>return true</code> cho tr√¨nh x·ª≠ l√Ω PING trong <code>image_sequential.js</code> ƒë·ªÉ gi·ªØ k√™nh giao ti·∫øp lu√¥n m·ªü.",
          "en": "<strong>Fix PING Handler:</strong> Added <code>return true</code> to PING handler in <code>image_sequential.js</code> to keep message channel open."
        }
      ]
    },
    {
      "type": "improvement",
      "emoji": "üîß",
      "title": { "vi": "C·∫£i Ti·∫øn", "en": "Improvements" },
      "items": [
        {
          "class": "improve",
          "vi": "<strong>Nh√∫ng Script Th√¥ng Minh:</strong> Ki·ªÉm tra marker <code>__FLOWFORGE_LOADED__</code> tr∆∞·ªõc khi nh√∫ng ƒë·ªÉ tr√°nh ch·∫°y m√£ ngu·ªìn hai l·∫ßn.",
          "en": "<strong>Smart Script Injection:</strong> Check marker <code>__FLOWFORGE_LOADED__</code> before injection to avoid running code twice."
        },
        {
          "class": "improve",
          "vi": "<strong>Th√¥ng B√°o L·ªói Chi Ti·∫øt:</strong> B·ªï sung b·∫£n ghi log chi ti·∫øt khi k·∫øt n·ªëi th·∫•t b·∫°i, h∆∞·ªõng d·∫´n ng∆∞·ªùi d√πng t·∫£i l·∫°i trang.",
          "en": "<strong>Better Error Messages:</strong> Added more detailed logs when connection fails, guiding user to reload page."
        },
        {
          "class": "improve",
          "vi": "<strong>T·∫£i L√™n D·ª± Ph√≤ng:</strong> N·∫øu n√∫t S·ª≠ d·ª•ng l·∫°i kh√¥ng ho·∫°t ƒë·ªông, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông t·∫£i l·∫°i to√†n b·ªô ·∫£nh tham chi·∫øu.",
          "en": "<strong>Fallback Upload:</strong> If Reuse button fails, automatically re-upload all reference images."
        }
      ]
    },
    {
      "type": "files",
      "emoji": "üìÅ",
      "title": { "vi": "T·ªáp Tin Thay ƒê·ªïi", "en": "Files Changed" },
      "items": [
        {
          "class": "",
          "vi": "<code>src/content_main.js</code> - Th√™m marker, s·ª≠a tr√¨nh x·ª≠ l√Ω th√¥ng ƒëi·ªáp",
          "en": "<code>src/content_main.js</code> - Added marker, fixed message handler"
        },
        {
          "class": "",
          "vi": "<code>src/logic/image_sequential.js</code> - Th√™m tr√¨nh x·ª≠ l√Ω cho IMG_START_BATCH_CREATE_ONLY",
          "en": "<code>src/logic/image_sequential.js</code> - Added handler for IMG_START_BATCH_CREATE_ONLY"
        },
        {
          "class": "",
          "vi": "<code>src/logic/image_uploader.js</code> - Vi·∫øt l·∫°i h√†m tryReuseStaticImages()",
          "en": "<code>src/logic/image_uploader.js</code> - Rewrote tryReuseStaticImages()"
        },
        {
          "class": "",
          "vi": "<code>src/logic/image_batch.js</code> - Th√™m c∆° ch·∫ø d·ª± ph√≤ng khi reuse th·∫•t b·∫°i",
          "en": "<code>src/logic/image_batch.js</code> - Added fallback when reuse fails"
        },
        {
          "class": "",
          "vi": "<code>src/sidepanel_video.js</code> - Nh√∫ng script th√¥ng minh v·ªõi ki·ªÉm tra marker",
          "en": "<code>src/sidepanel_video.js</code> - Smart injection with marker check"
        },
        {
          "class": "",
          "vi": "<code>src/sidepanel_image.js</code> - Nh√∫ng script th√¥ng minh, s·ª≠ d·ª•ng content_bundle.js",
          "en": "<code>src/sidepanel_image.js</code> - Smart injection, use content_bundle.js"
        }
      ]
    }
  ]
}
